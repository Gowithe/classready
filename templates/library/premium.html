{% extends "base.html" %}
{% block title %}üëë Premium - Teacher Platform{% endblock %}

{% block extra_css %}
<style>
  .premium-hero {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 3rem 2rem;
    border-radius: 24px;
    text-align: center;
    margin-bottom: 2rem;
  }
  .premium-hero h1 { font-size: 2.5rem; margin: 0 0 0.5rem; }
  .premium-hero p { font-size: 1.1rem; opacity: 0.9; margin: 0; }
  
  .current-status {
    background: #dcfce7;
    border: 2px solid #22c55e;
    border-radius: 16px;
    padding: 1.5rem;
    text-align: center;
    margin-bottom: 2rem;
  }
  .current-status h3 { margin: 0 0 0.5rem; color: #166534; }
  .current-status p { margin: 0; color: #15803d; }
  
  .plans-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .plan-card {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
    border: 2px solid #e2e8f0;
    transition: all 0.2s;
    position: relative;
  }
  .plan-card:hover { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(0,0,0,0.1); }
  .plan-card.popular { border-color: #667eea; }
  .plan-card.popular::before {
    content: '‚≠ê ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥';
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 4px 16px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
  }
  
  .plan-name { font-size: 1.3rem; font-weight: 800; color: #1e293b; margin: 0 0 0.5rem; }
  .plan-price { margin: 1rem 0; }
  .plan-price .amount { font-size: 2.5rem; font-weight: 900; color: #667eea; }
  .plan-price .period { font-size: 0.9rem; color: #64748b; }
  .plan-save { background: #fef3c7; color: #92400e; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; display: inline-block; margin-bottom: 1rem; }
  
  .plan-features { list-style: none; padding: 0; margin: 1.5rem 0; }
  .plan-features li { padding: 0.5rem 0; display: flex; align-items: center; gap: 0.5rem; font-size: 0.95rem; color: #475569; }
  .plan-features li::before { content: '‚úì'; color: #22c55e; font-weight: 700; }
  
  .btn-subscribe {
    width: 100%;
    padding: 1rem;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border: none;
    border-radius: 12px;
    font-weight: 800;
    font-size: 1rem;
    cursor: pointer;
  }
  .btn-subscribe:hover { filter: brightness(1.1); }
  .btn-subscribe:disabled { opacity: 0.6; cursor: not-allowed; }
  
  .features-section { margin-top: 3rem; }
  .features-section h2 { text-align: center; margin-bottom: 2rem; color: #1e293b; }
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
  }
  .feature-item {
    background: white;
    padding: 1.5rem;
    border-radius: 16px;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
  }
  .feature-icon { font-size: 2.5rem; margin-bottom: 0.75rem; }
  .feature-item h4 { margin: 0 0 0.5rem; color: #1e293b; }
  .feature-item p { margin: 0; font-size: 0.9rem; color: #64748b; }
</style>
{% endblock %}

{% block content %}
<div class="premium-hero">
  <h1>üëë Premium</h1>
  <p>‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô!</p>
</div>

{% if current_sub %}
<div class="current-status">
  <h3>‚úÖ ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å Premium ‡πÅ‡∏•‡πâ‡∏ß!</h3>
  <p>‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏: {{ current_sub.expires_at[:10] }}</p>
</div>
{% endif %}

<div class="plans-grid">
  {% for plan in plans %}
  <div class="plan-card {% if plan.duration_days == 365 %}popular{% endif %}">
    <div class="plan-name">{{ plan.name }}</div>
    <div class="plan-price">
      <span class="amount">‡∏ø{{ plan.price|int }}</span>
      <span class="period">/ {% if plan.duration_days == 30 %}‡πÄ‡∏î‡∏∑‡∏≠‡∏ô{% elif plan.duration_days == 365 %}‡∏õ‡∏µ{% else %}{{ plan.duration_days }} ‡∏ß‡∏±‡∏ô{% endif %}</span>
    </div>
    {% if plan.duration_days == 365 %}
    <div class="plan-save">‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î 40%!</div>
    {% endif %}
    <p style="color:#64748b; font-size:0.9rem;">{{ plan.description }}</p>
    <ul class="plan-features">
      <li>‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</li>
      <li>Slides, Games, ‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏Ñ‡∏£‡∏ö</li>
      <li>Clone ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î</li>
      <li>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ï‡∏•‡∏≠‡∏î</li>
      {% if plan.duration_days == 365 %}
      <li>Priority Support</li>
      {% endif %}
    </ul>
    <button class="btn-subscribe" onclick="subscribe({{ plan.id }})" {% if current_sub %}disabled{% endif %}>
      {% if current_sub %}‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡πâ‡∏ß{% else %}‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏•‡∏¢{% endif %}
    </button>
  </div>
  {% endfor %}
</div>

<div class="features-section">
  <h2>üéÅ ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</h2>
  <div class="features-grid">
    <div class="feature-item">
      <div class="feature-icon">üìö</div>
      <h4>‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤</h4>
      <p>English ‡∏õ.1-‡∏°.6 ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏≠‡∏µ‡∏Å‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢</p>
    </div>
    <div class="feature-item">
      <div class="feature-icon">üé¨</div>
      <h4>Slides ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≠‡∏ô</h4>
      <p>‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>
    </div>
    <div class="feature-item">
      <div class="feature-icon">üéÆ</div>
      <h4>‡πÄ‡∏Å‡∏°‡∏™‡∏ô‡∏∏‡∏Å</h4>
      <p>Bamboozle, Memory Match ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ</p>
    </div>
    <div class="feature-item">
      <div class="feature-icon">üìù</div>
      <h4>‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏Ñ‡∏£‡∏ö</h4>
      <p>MCQ, Fill Blanks, Unscramble</p>
    </div>
  </div>
</div>

<script>
async function subscribe(planId) {
  if (!confirm('‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Premium?')) return;
  
  try {
    const res = await fetch('/premium/subscribe/' + planId, { method: 'POST' });
    const data = await res.json();
    if (data.ok) {
      alert('üéâ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Premium ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
      location.reload();
    } else {
      alert('‚ùå ' + (data.error || '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î'));
    }
  } catch (e) {
    alert('‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î');
  }
}
</script>
{% endblock %}
